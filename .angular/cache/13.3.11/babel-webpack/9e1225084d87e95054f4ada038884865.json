{"ast":null,"code":"import { ActivatedRoute, Router } from '@angular/router';\nimport { StoreManager } from '../../managers/store.manager';\nimport { EMPTY } from 'rxjs';\nimport { switchMap, map, catchError } from 'rxjs/operators';\nimport { GameModalComponent } from '../game-modal/game-modal.component';\nimport { BsModalService } from 'ngx-bootstrap/modal';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../managers/store.manager\";\nimport * as i3 from \"ngx-bootstrap/modal\";\n\nfunction StoreDetailComponent_div_0_ng_container_12_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 13)(1, \"app-game\", 14);\n    i0.ɵɵlistener(\"gameClick\", function StoreDetailComponent_div_0_ng_container_12_div_1_Template_app_game_gameClick_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const game_r5 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext(3);\n      return ctx_r6.openGameModal(game_r5.id);\n    });\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const game_r5 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"game\", game_r5);\n  }\n}\n\nfunction StoreDetailComponent_div_0_ng_container_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, StoreDetailComponent_div_0_ng_container_12_div_1_Template, 2, 1, \"div\", 12);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const games_r3 = ctx.ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", games_r3);\n  }\n}\n\nfunction StoreDetailComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"div\", 3)(3, \"div\", 4);\n    i0.ɵɵelement(4, \"img\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 6)(6, \"h3\", 7);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(8, \"div\", 8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"h4\", 9);\n    i0.ɵɵtext(10, \"Juegos disponibles\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 10);\n    i0.ɵɵtemplate(12, StoreDetailComponent_div_0_ng_container_12_Template, 2, 1, \"ng-container\", 11);\n    i0.ɵɵpipe(13, \"async\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const store_r1 = ctx.ngIf;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate(\"alt\", store_r1.name);\n    i0.ɵɵproperty(\"src\", store_r1.image_background, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(store_r1.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"innerHTML\", store_r1.description, i0.ɵɵsanitizeHtml);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(13, 5, ctx_r0.games$));\n  }\n}\n\nexport let StoreDetailComponent = /*#__PURE__*/(() => {\n  class StoreDetailComponent {\n    constructor(route, router, storeManager, modalService) {\n      this.route = route;\n      this.router = router;\n      this.storeManager = storeManager;\n      this.modalService = modalService;\n      this.store$ = this.route.paramMap.pipe(map(params => params.get('id')), switchMap(id => {\n        if (!id) {\n          this.router.navigate(['/stores']);\n          return EMPTY;\n        }\n\n        return this.storeManager.getStoreDetails(id).pipe(catchError(() => {\n          this.router.navigate(['/stores']);\n          return EMPTY;\n        }));\n      }));\n      this.games$ = this.route.paramMap.pipe(map(params => Number(params.get('id'))), switchMap(id => {\n        if (!id) return EMPTY;\n        return this.storeManager.getGamesForStore(id);\n      }));\n    }\n\n    openGameModal(gameId) {\n      const initialState = {\n        gameId\n      };\n      this.modalService.show(GameModalComponent, {\n        initialState,\n        class: 'modal-dialog-centered modal-lg'\n      });\n    }\n\n  }\n\n  StoreDetailComponent.ɵfac = function StoreDetailComponent_Factory(t) {\n    return new (t || StoreDetailComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.StoreManager), i0.ɵɵdirectiveInject(i3.BsModalService));\n  };\n\n  StoreDetailComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: StoreDetailComponent,\n    selectors: [[\"app-store-detail\"]],\n    decls: 2,\n    vars: 3,\n    consts: [[\"class\", \"section section-dark\", 4, \"ngIf\"], [1, \"section\", \"section-dark\"], [1, \"container\", \"text-center\"], [1, \"card\", \"card-profile\"], [1, \"card-avatar\"], [1, \"img-fluid\", 3, \"src\", \"alt\"], [1, \"card-body\"], [1, \"title\"], [1, \"text-justify\", \"text-white\", \"mt-3\", 3, \"innerHTML\"], [1, \"text-white\", \"mt-5\", \"mb-4\"], [1, \"row\"], [4, \"ngIf\"], [\"class\", \"col-md-4 mb-4\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-md-4\", \"mb-4\"], [3, \"game\", \"gameClick\"]],\n    template: function StoreDetailComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, StoreDetailComponent_div_0_Template, 14, 7, \"div\", 0);\n        i0.ɵɵpipe(1, \"async\");\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 1, ctx.store$));\n      }\n    },\n    styles: [\"\"]\n  });\n  return StoreDetailComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}