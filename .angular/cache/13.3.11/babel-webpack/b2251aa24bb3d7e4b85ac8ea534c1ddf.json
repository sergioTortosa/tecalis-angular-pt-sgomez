{"ast":null,"code":"import { Injectable, ɵɵdefineInjectable, Component, Input, HostBinding, ElementRef, Host, Renderer2, NgModule } from '@angular/core';\nimport { isBs3 } from 'ngx-bootstrap/utils';\nimport { CommonModule } from '@angular/common';\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/common';\n\nfunction ProgressbarComponent_bar_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"bar\", 2);\n    ɵngcc0.ɵɵprojection(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"type\", ctx_r0.type)(\"value\", ctx_r0._value)(\"max\", ctx_r0._max);\n  }\n}\n\nfunction ProgressbarComponent_ng_template_1_bar_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"bar\", 2);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r3 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"type\", item_r3.type)(\"value\", item_r3.value)(\"max\", item_r3.max);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(item_r3.label);\n  }\n}\n\nfunction ProgressbarComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, ProgressbarComponent_ng_template_1_bar_0_Template, 2, 4, \"bar\", 3);\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r1._value);\n  }\n}\n\nconst _c0 = [\"*\"];\nlet ProgressbarConfig = /*#__PURE__*/(() => {\n  class ProgressbarConfig {\n    constructor() {\n      /**\n       * if `true` changing value of progress bar will be animated\n       */\n      this.animate = false;\n      /**\n       * maximum total value of progress element\n       */\n\n      this.max = 100;\n    }\n\n  }\n\n  ProgressbarConfig.ɵfac = function ProgressbarConfig_Factory(t) {\n    return new (t || ProgressbarConfig)();\n  };\n  /** @nocollapse */\n\n\n  ProgressbarConfig.ɵprov = ɵɵdefineInjectable({\n    factory: function ProgressbarConfig_Factory() {\n      return new ProgressbarConfig();\n    },\n    token: ProgressbarConfig,\n    providedIn: \"root\"\n  });\n  return ProgressbarConfig;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nif (false) {\n  /**\n   * if `true` changing value of progress bar will be animated\n   * @type {?}\n   */\n  ProgressbarConfig.prototype.animate;\n  /**\n   * maximum total value of progress element\n   * @type {?}\n   */\n\n  ProgressbarConfig.prototype.max;\n}\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n\nlet ProgressbarComponent = /*#__PURE__*/(() => {\n  class ProgressbarComponent {\n    /**\n     * @param {?} config\n     */\n    constructor(config) {\n      this.isStacked = false;\n      this._max = 100;\n      this.addClass = true;\n      /* tslint:disable-next-line:no-any */\n\n      this.bars = [];\n      Object.assign(this, config);\n    }\n    /**\n     * if `true` changing value of progress bar will be animated\n     * @param {?} value\n     * @return {?}\n     */\n\n\n    set animate(value) {\n      this._animate = value;\n      this.bars.forEach(\n      /**\n      * @param {?} b\n      * @return {?}\n      */\n      b => {\n        b.animate = value;\n      });\n    }\n    /**\n     * If `true`, striped classes are applied\n     * @param {?} value\n     * @return {?}\n     */\n\n\n    set striped(value) {\n      this._striped = value;\n      this.bars.forEach(\n      /**\n      * @param {?} b\n      * @return {?}\n      */\n      b => {\n        b.striped = value;\n      });\n    }\n    /**\n     * current value of progress bar. Could be a number or array of objects\n     * like {\"value\":15,\"type\":\"info\",\"label\":\"15 %\"}\n     * @param {?} value\n     * @return {?}\n     */\n\n\n    set value(value) {\n      this.isStacked = Array.isArray(value);\n      this._value = value;\n    }\n    /**\n     * @return {?}\n     */\n\n\n    get isBs3() {\n      return isBs3();\n    }\n    /**\n     * maximum total value of progress element\n     * @return {?}\n     */\n\n\n    get max() {\n      return this._max;\n    }\n    /**\n     * @param {?} v\n     * @return {?}\n     */\n\n\n    set max(v) {\n      this._max = v;\n      this.bars.forEach(\n      /**\n      * @param {?} bar\n      * @return {?}\n      */\n      bar => {\n        bar.recalculatePercentage();\n      });\n    }\n    /**\n     * @param {?} bar\n     * @return {?}\n     */\n\n\n    addBar(bar) {\n      bar.animate = this._animate;\n      bar.striped = this._striped;\n      this.bars.push(bar);\n    }\n    /**\n     * @param {?} bar\n     * @return {?}\n     */\n\n\n    removeBar(bar) {\n      this.bars.splice(this.bars.indexOf(bar), 1);\n    }\n\n  }\n\n  ProgressbarComponent.ɵfac = function ProgressbarComponent_Factory(t) {\n    return new (t || ProgressbarComponent)(ɵngcc0.ɵɵdirectiveInject(ProgressbarConfig));\n  };\n\n  ProgressbarComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: ProgressbarComponent,\n    selectors: [[\"progressbar\"]],\n    hostVars: 3,\n    hostBindings: function ProgressbarComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"max\", ctx.max);\n        ɵngcc0.ɵɵclassProp(\"progress\", ctx.addClass);\n      }\n    },\n    inputs: {\n      animate: \"animate\",\n      striped: \"striped\",\n      value: \"value\",\n      max: \"max\",\n      type: \"type\"\n    },\n    ngContentSelectors: _c0,\n    decls: 2,\n    vars: 2,\n    consts: [[3, \"type\", \"value\", \"max\", 4, \"ngIf\"], [3, \"ngIf\"], [3, \"type\", \"value\", \"max\"], [3, \"type\", \"value\", \"max\", 4, \"ngFor\", \"ngForOf\"]],\n    template: function ProgressbarComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵtemplate(0, ProgressbarComponent_bar_0_Template, 2, 3, \"bar\", 0);\n        ɵngcc0.ɵɵtemplate(1, ProgressbarComponent_ng_template_1_Template, 1, 1, \"ng-template\", 1);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.isStacked);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.isStacked);\n      }\n    },\n    directives: function () {\n      return [ɵngcc1.NgIf, BarComponent, ɵngcc1.NgForOf];\n    },\n    styles: [\"[_nghost-%COMP%] {\\n      width: 100%;\\n      display: flex;\\n    }\"]\n  });\n  /** @nocollapse */\n\n  return ProgressbarComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nif (false) {\n  /**\n   * provide one of the four supported contextual classes: `success`, `info`, `warning`, `danger`\n   * @type {?}\n   */\n  ProgressbarComponent.prototype.type;\n  /** @type {?} */\n\n  ProgressbarComponent.prototype.isStacked;\n  /** @type {?} */\n\n  ProgressbarComponent.prototype._striped;\n  /** @type {?} */\n\n  ProgressbarComponent.prototype._animate;\n  /** @type {?} */\n\n  ProgressbarComponent.prototype._max;\n  /** @type {?} */\n\n  ProgressbarComponent.prototype._value;\n  /** @type {?} */\n\n  ProgressbarComponent.prototype.addClass;\n  /** @type {?} */\n\n  ProgressbarComponent.prototype.bars;\n}\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// todo: number pipe\n// todo: use query from progress?\n\n\nlet BarComponent = /*#__PURE__*/(() => {\n  class BarComponent {\n    /**\n     * @param {?} el\n     * @param {?} progress\n     * @param {?} renderer\n     */\n    constructor(el, progress, renderer) {\n      this.el = el;\n      this.renderer = renderer;\n      this.addClass = true;\n      this.percent = 0;\n      this.progress = progress;\n    }\n    /**\n     * @return {?}\n     */\n\n\n    get setBarWidth() {\n      this.recalculatePercentage();\n      return this.percent;\n    }\n    /**\n     * @return {?}\n     */\n\n\n    get isBs3() {\n      return isBs3();\n    }\n    /**\n     * @return {?}\n     */\n\n\n    ngOnInit() {\n      this.progress.addBar(this);\n    }\n    /**\n     * @return {?}\n     */\n\n\n    ngOnDestroy() {\n      this.progress.removeBar(this);\n    }\n    /**\n     * @param {?} changes\n     * @return {?}\n     */\n\n\n    ngOnChanges(changes) {\n      if (changes.value) {\n        if (!changes.value.currentValue && changes.value.currentValue !== 0) {\n          return;\n        }\n\n        this.value = changes.value.currentValue;\n        this.recalculatePercentage();\n      }\n\n      if (changes.type) {\n        this.type = changes.type.currentValue;\n        this.applyTypeClasses();\n      }\n    }\n    /**\n     * @return {?}\n     */\n\n\n    recalculatePercentage() {\n      this.percent = +(this.value / this.progress.max * 100).toFixed(2);\n      /** @type {?} */\n\n      const totalPercentage = this.progress.bars.reduce(\n      /**\n      * @param {?} total\n      * @param {?} bar\n      * @return {?}\n      */\n      function (total, bar) {\n        return total + bar.percent;\n      }, 0);\n\n      if (totalPercentage > 100) {\n        this.percent -= totalPercentage - 100;\n      }\n    }\n    /**\n     * @private\n     * @return {?}\n     */\n\n\n    applyTypeClasses() {\n      if (this._prevType) {\n        /** @type {?} */\n        const barTypeClass = `progress-bar-${this._prevType}`;\n        /** @type {?} */\n\n        const bgClass = `bg-${this._prevType}`;\n        this.renderer.removeClass(this.el.nativeElement, barTypeClass);\n        this.renderer.removeClass(this.el.nativeElement, bgClass);\n        this._prevType = null;\n      }\n\n      if (this.type) {\n        /** @type {?} */\n        const barTypeClass = `progress-bar-${this.type}`;\n        /** @type {?} */\n\n        const bgClass = `bg-${this.type}`;\n        this.renderer.addClass(this.el.nativeElement, barTypeClass);\n        this.renderer.addClass(this.el.nativeElement, bgClass);\n        this._prevType = this.type;\n      }\n    }\n\n  }\n\n  BarComponent.ɵfac = function BarComponent_Factory(t) {\n    return new (t || BarComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ProgressbarComponent, 1), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2));\n  };\n\n  BarComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: BarComponent,\n    selectors: [[\"bar\"]],\n    hostAttrs: [\"role\", \"progressbar\", \"aria-valuemin\", \"0\"],\n    hostVars: 15,\n    hostBindings: function BarComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"aria-valuenow\", ctx.value)(\"aria-valuetext\", ctx.percent ? ctx.percent.toFixed(0) + \"%\" : \"\")(\"aria-valuemax\", ctx.max);\n        ɵngcc0.ɵɵstyleProp(\"height\", \"100\", \"%\")(\"width\", ctx.setBarWidth, \"%\");\n        ɵngcc0.ɵɵclassProp(\"progress-bar-animated\", !ctx.isBs3 && ctx.animate)(\"progress-bar-striped\", ctx.striped)(\"active\", ctx.isBs3 && ctx.animate)(\"progress-bar\", ctx.addClass);\n      }\n    },\n    inputs: {\n      value: \"value\",\n      type: \"type\",\n      max: \"max\"\n    },\n    features: [ɵngcc0.ɵɵNgOnChangesFeature],\n    ngContentSelectors: _c0,\n    decls: 1,\n    vars: 0,\n    template: function BarComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵprojection(0);\n      }\n    },\n    encapsulation: 2\n  });\n  /** @nocollapse */\n\n  return BarComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nif (false) {\n  /** @type {?} */\n  BarComponent.prototype.max;\n  /**\n   * provide one of the four supported contextual classes: `success`, `info`, `warning`, `danger`\n   * @type {?}\n   */\n\n  BarComponent.prototype.type;\n  /**\n   * current value of progress bar\n   * @type {?}\n   */\n\n  BarComponent.prototype.value;\n  /** @type {?} */\n\n  BarComponent.prototype.addClass;\n  /** @type {?} */\n\n  BarComponent.prototype.striped;\n  /** @type {?} */\n\n  BarComponent.prototype.animate;\n  /** @type {?} */\n\n  BarComponent.prototype.percent;\n  /** @type {?} */\n\n  BarComponent.prototype.progress;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  BarComponent.prototype._prevType;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  BarComponent.prototype.el;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  BarComponent.prototype.renderer;\n}\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n\nlet ProgressbarModule = /*#__PURE__*/(() => {\n  class ProgressbarModule {\n    /**\n     * @return {?}\n     */\n    static forRoot() {\n      return {\n        ngModule: ProgressbarModule,\n        providers: []\n      };\n    }\n\n  }\n\n  ProgressbarModule.ɵfac = function ProgressbarModule_Factory(t) {\n    return new (t || ProgressbarModule)();\n  };\n\n  ProgressbarModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: ProgressbarModule\n  });\n  ProgressbarModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule]]\n  });\n  return ProgressbarModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(ProgressbarModule, {\n    declarations: function () {\n      return [BarComponent, ProgressbarComponent];\n    },\n    imports: function () {\n      return [CommonModule];\n    },\n    exports: function () {\n      return [BarComponent, ProgressbarComponent];\n    }\n  });\n})();\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n\nexport { BarComponent, ProgressbarComponent, ProgressbarConfig, ProgressbarModule }; //# sourceMappingURL=ngx-bootstrap-progressbar.js.map","map":null,"metadata":{},"sourceType":"module"}